<!DOCTYPE html>
<html lang="en">


<!-- molla/dashboard.html  22 Nov 2019 10:03:13 GMT -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Molla - Bootstrap eCommerce Template</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/site/assets/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/site/assets/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/site/assets/images/icons/favicon-16x16.png">
    <link rel="manifest" href="/site/assets/images/icons/site.html">
    <link rel="mask-icon" href="/site/assets/images/icons/safari-pinned-tab.svg" color="#666666">
    <link rel="shortcut icon" href="/site/assets/images/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" content="/site/assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- Plugins CSS File -->
    <!-- <link rel="stylesheet" href="/site/assets/css/bootstrap.min.css"> -->
    <!-- Main CSS File -->
    <!-- <link rel="stylesheet" href="/vendors/feather/feather.css"> -->
    <!-- <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css"> -->
    <!-- <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css"> -->
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css"> -->
    <!-- <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="/js/select.dataTables.min.css"> -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <!-- <link rel="stylesheet" href="/css/vertical-layout-light/style.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.1/jquery.toast.min.css"
    integrity="sha512-wJgJNTBBkLit7ymC6vvzM1EcSWeM9mmOu+1USHaRBbHkm6W9EgM0HY27+UtUaprntaYQJF75rc8gjxllKs5OIQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/site/assets/css/style.css">
    <link rel="stylesheet" href="/css/table.css">

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/dist/vue-router.global.js"></script>


    <style>
        .expandable-table thead tr th {
            background: #c96;
            padding: 10px;
            color: #ffffff;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div class="page-wrapper" id="myapp">
        <th:block th:replace="site/menu :: menu"></th:block>


        <main class="main">
            <div class="page-header text-center" style="background-image: url('/site/assets/images/page-header-bg.jpg')">
                <div class="container">
                    <h1 class="page-title">My Account<span>Shop</span></h1>
                </div><!-- End .container -->
            </div><!-- End .page-header -->


            <div class="page-content">
                <div class="dashboard">
                    <div class="container">
                        <div class="row">
                            <aside class="col-md-4 col-lg-2">
                                <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab"
                                            href="#tab-dashboard" role="tab" aria-controls="tab-dashboard"
                                            aria-selected="true">Thông tin cá nhân</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders"
                                            role="tab" aria-controls="tab-orders" aria-selected="false">Đơn hàng</a>
                                    </li>

                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address"
                                            role="tab" aria-controls="tab-address" aria-selected="false">Địa chỉ</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-account-link" data-toggle="tab" href="#tab-account"
                                            role="tab" aria-controls="tab-account" aria-selected="false">Account
                                            Details</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#">Sign Out</a>
                                    </li>
                                </ul>
                            </aside><!-- End .col-lg-3 -->

                            <div class="col-md-8 col-lg-10">
                                <div class="tab-content">
                                    <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel"
                                        aria-labelledby="tab-dashboard-link">
                                        <h6>Xin chào !</h6>
                                               
                                           <h6>
                                            <br>
                                            Từ trang thông tin tài khoản của bạn, bạn có thể xem <a href="#tab-orders"
                                                class="tab-trigger-link link-underline">Danh sách đơn hàng</a> hoặc quản lí
                                            <a href="#tab-address" class="tab-trigger-link">Danh sách địa chỉ</a>, và <a href="#tab-account" class="tab-trigger-link">Chỉnh sửa thông tin cá nhân</a>.
                                           </h6>
                                        </p>
                                    </div><!-- .End .tab-pane -->

                                    <!-- Đơn hàng -->
                                    <div class="tab-pane fade" id="tab-orders" role="tabpanel"
                                        aria-labelledby="tab-orders-link">

                                        <!-- <div class="table-wrapper"> -->
                                        <div class="table-title">
                                            <div class="row">
                                                <div class="col-4">
                                                    <div class="show-entries">
                                                        <span>Show</span>
                                                        <select v-model="selectedSize" @change="setSize(selectedSize)">
                                                            <option v-for="size in sizes" :value="size">{{ size }}
                                                            </option>
                                                        </select>
                                                        <span>entries</span>

                                                    </div>

                                                </div>
                                                <div class="col-4">
                                                    <h2 class="text-center">Danh sách hóa đơn</h2>
                                                </div>

                                            </div>
                                        </div>
                                        <table class="table table-bordered display expandable-table">
                                            <thead style="background-color: blanchedalmond;">
                                                <tr>
                                                <tr>
                                                    <th>Mã HD</th>
                                                    <th>Ngày đặt</th>
                                                    <th>Người đặt</th>
                                                    <th>Tổng tiển</th>
                                                    <th>Giảm giá</th>
                                                    <th>Ghi chú</th>
                                                    <th>Trạng thái</th>

                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                <tr v-if="list.length==0">
                                                    <td colspan="8" class="text-center">
                                                        <h4>
                                                            Không có thuộc tính nào được tìm thấy !
                                                        </h4>
                                                    </td>
                                                </tr>
                                                <tr v-for="item in list">
                                                    <td>{{item.orderId}}</td>
                                                    <td>{{item.createDate}}</td>
                                                    <td>{{item.user.fullname}}</td>
                                                    <td>{{item.totalPrice |customCurrency}}</td>
                                                    <td>{{item.discount |customCurrency }}</td>
                                                    <td>{{item.notes}}</td>
                                                    <td> <span :class="getStatusClass(item.status)">{{
                                                            getStatusNameText(item.status) }}</span></td>

                                                    <td>
                                                        <div>




                                                            <!-- Button trigger modal -->
                                                            <button type="button"
                                                                class="btn btn-outline-primary-2 px-s py-2"
                                                                data-toggle="modal"
                                                                :data-target="'#exampleModal'+item.orderId">Chi tiết <i
                                                                    class="icon-long-arrow-right"></i></button>



                                                            <!-- Modal -->
                                                            <div class="modal fade " :id="'exampleModal'+item.orderId"
                                                                tabindex="-1" role="dialog"
                                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog modal-xl" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">Chi tiết
                                                                            </h5>
                                                                            <button type="button" class="close"
                                                                                data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body w-100">
                                                                            <table class="w-100 text-center">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>Ảnh</th>
                                                                                        <th>Tên</th>
                                                                                        <th>Giá</th>
                                                                                        <th>Số lượng</th>
                                                                                        <th>Tổng tiển</th>

                                                                                    </tr>
                                                                                </thead>

                                                                                <tbody class=" text-center">
                                                                                    <tr
                                                                                        v-for="orderItem in item.orderItems">
                                                                                        <td><img :src="'/phonestore/images/'+orderItem.image"
                                                                                                alt=""></td>
                                                                                        <td class="text-center">
                                                                                            {{orderItem.productDetailsName}}
                                                                                        </td>
                                                                                        <td>{{orderItem.price |
                                                                                            customCurrency}}
                                                                                        </td>
                                                                                        <td>{{orderItem.quantity}}</td>
                                                                                        <td>{{orderItem.totalPrice
                                                                                            |customCurrency}}
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>

                                                                            <div class="row mt-4 w-100 word-break">
                                                                                <div class="col-6 "
                                                                                    style="white-space: inherit ;">
                                                                                    <h4>
                                                                                        <ul>
                                                                                            <li>
                                                                                                <h6>
                                                                                                    Tên người nhận :
                                                                                                    {{item.user.fullname}}
                                                                                                </h6>
                                                                                            </li>
                                                                                            <li>
                                                                                                <h6>Phương thức thanh
                                                                                                    toán :
                                                                                                    {{item.payments.paymentMethod=='CASH'?'Thanh toán khi nhận hàng':'VNPAY'}}</h6>
                                                                                                  
                                                                                            
                                                                                            </li>

                                                                                            <li>
                                                                                                <h6>Trạng thái thánh
                                                                                                    toán :
                                                                                                    {{item.payments.paymentStatus}}
                                                                                                </h6>
                                                                                            </li>
                                                                                        </ul>
                                                                                    </h4>
                                                                                </div>
                                                                                <div class="col-6 word-break"
                                                                                    style="white-space: normal !important;">
                                                                                    <h6 class="text-center"
                                                                                        style="white-space: unset !important ;">
                                                                                        Địa chỉ:
                                                                                        {{item.address.address}}
                                                                                    </h6>
                                                                                    <h6 v-if="item.voucher">
                                                                                        <ul>
                                                                                            <li>
                                                                                                <h6> Mã giảm giá :
                                                                                                    {{item.voucher.name}}
                                                                                                </h6>

                                                                                            </li>
                                                                                            <li>
                                                                                                <h6> Giảm giá
                                                                                                    :-{{item.discount
                                                                                                    |customCurrency}}
                                                                                                </h6>
                                                                                            </li>
                                                                                        </ul>
                                                                                    </h6>
                                                                                    <h6>
                                                                                        Tổng tiền : {{item.totalPrice |
                                                                                        customCurrency}}
                                                                                    </h6>
                                                                                </div>


                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" v-if="item.status=='PENDING'"
                                                                                class="btn btn-danger px-1 py-2" @click="cancelOrder(item.orderId)"
                                                                                >Hủy đơn hàng</button>

                                                                            <button type="button"
                                                                                class="btn btn-success px-1 py-2"
                                                                                data-dismiss="modal">Đóng</button>
                                                                                
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </td>
                                                </tr>




                                            </tbody>
                                        </table>
                                        <div class="clearfix mt-3">
                                            <div>
                                                <span>Trạng thái</span>
                                                <select v-model="status" class="" @change="goToPage(1)">
                                                    <option v-for="status in listStatus" :value="status.id">{{
                                                        status.name }}
                                                    </option>
                                                </select>

                                            </div>

                                            <ul class="pagination">
                                                <li class="page-item "><a @click="prev()" class="page-link">Previous</a>
                                                </li>
                                                <li class="page-item" v-for="pageNumber in getPaginationArray()"
                                                    :class="{ 'active': pageNumber == currentPage }">
                                                    <a class="page-link" @click="goToPage(pageNumber)">{{ pageNumber
                                                        }}</a>
                                                </li>

                                                <li class="page-item"><a class="page-link" @click="next()">Next</a></li>
                                            </ul>
                                        </div>

                                    </div><!-- .End .tab-pane -->


                                    <div class="tab-pane fade" id="tab-address" role="tabpanel"
                                        aria-labelledby="tab-address-link">
                                        <b>Danh sách các địa chỉ hiện tại</b>

                                        <div class="row">
                                            <div class="col-lg-6" v-for="item in listAddress">
                                                <div class="card card-dashboard">
                                                    <div class="card-body">
                                                        <h3 class="card-title">Địa chỉ</h3>
                                                        <!-- End .card-title -->

                                                        <h5>{{item.fullname}} - {{item.phone}}<h5>

                                                                <h6>ĐC:
                                                                    {{item.address}}</h6>



                                                                <button type="button" class="btn btn-success px-1 py-2 mt-2"
                                                                    @click="editAddress(item.addressId)">

                                                                    Edit <i class="icon-edit"></i>
                                                                </button>


                                                                <!-- Modal -->
                                                                <div class="modal fade" id="addressModal" tabindex="-1"
                                                                    role="dialog" aria-labelledby="exampleModalLabel"
                                                                    aria-hidden="true">
                                                                    <div class="modal-dialog" role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title" id="form-title">
                                                                                    Địa chỉ</h5>
                                                                                <button type="button" class="close"
                                                                                    data-dismiss="modal"
                                                                                    aria-label="Close">
                                                                                    <span
                                                                                        aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>

                                                                            <div class="modal-body">
                                                                                <form class="forms-sample"
                                                                                    enctype="multipart/form-data">

                                                                                    <div class="row">
                                                                                        <div class="col-lg-6">

                                                                                            <label for="">Họ và
                                                                                                tên</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                v-model="address.fullname">

                                                                                        </div>
                                                                                        <div class="col-lg-6">
                                                                                            <label
                                                                                                for="exampleInputName1">Điện
                                                                                                thoại</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                v-model="address.phone">
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="row">
                                                                                        <div class="col-lg-4">
                                                                                            <label>Tỉnh</label>
                                                                                            <select name=""
                                                                                                id="province"
                                                                                                class="form-control"
                                                                                                v-model="address.provice">
                                                                                                <option value="-1">Chọn
                                                                                                    tỉnh thành</option>
                                                                                            </select>
                                                                                        </div>
                                                                                        <div class="col-lg-4">

                                                                                            <label>Quận huyện *</label>
                                                                                            <select name=""
                                                                                                id="district"
                                                                                                class="form-control"
                                                                                                v-model="address.district">
                                                                                                <option value="-1">Chọn
                                                                                                    quận/huyện</option>
                                                                                            </select>
                                                                                        </div>
                                                                                        <div class="col-lg-4">
                                                                                            <label>Phường xã *</label>
                                                                                            <select name="" id="town"
                                                                                                class="form-control"
                                                                                                v-model="address.town">
                                                                                                <option value="-1">Chọn
                                                                                                    phường/xã</option>
                                                                                            </select>
                                                                                        </div>
                                                                                    </div>


                                                                                    <div class="row">
                                                                                        <div class="col-lg-12">
                                                                                            <label
                                                                                            for="exampleInputName1">Địa chỉ chi tiết</label>
                                                                                        <input type="text"
                                                                                            class="form-control"
                                                                                            v-model="address.street">
                                                                                        </div>
                                                                                    </div>


                                                                                    <button type="button" @click="updateAddress()"
                                                                                        class="btn btn-success mr-2">Lưu</button>
                                                                                    <!--     <button class="btn btn-light">Cancel</button> -->
                                                                                </form>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>

                                                    </div><!-- End .card-body -->
                                                </div><!-- End .card-dashboard -->
                                            </div><!-- End .col-lg-6 -->


                                        </div><!-- End .row -->
                                    </div><!-- .End .tab-pane -->

                                    <div class="tab-pane fade" id="tab-account" role="tabpanel"
                                        aria-labelledby="tab-account-link">
                                        <h4 class="w-100 text-center"><b>Thông tin tài khoản</b></h4>
                                        <div class="row">
                                            <div class="col-lg-6">
                                             <h6> Họ và tên : {{user.fullname}}</h6>
                                            </div>
                                            <div class="col-lg-6">
                                                <h6> Tên đăng nhập : {{user.username}}</h6>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                             <h6> Email : {{user.email}}</h6>
                                            </div>
                                            <div class="col-lg-6">
                                                <h6> Số điện thoại : {{user.phone || 'Chưa có'}}</h6>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                             <h6> Ngày tạo : {{user.createDate}}</h6>
                                            </div>
                                            <div class="col-lg-6">
                                                <h6> Ngày cật nhập : {{user.updateDate || 'Chưa có'}}</h6>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-6">
                                             <h6> Tình trạng : <span class="badge badge-danger" v-if="user.delete">Đã xóa</span> <span class="badge badge-success" v-if="!user.delete">Đang hoạt động</span></h6>
                                            </div>
                                            <div class="col-lg-6">
                                             <h6> Xác thực : <span class="badge badge-success" v-if="user.active">Đã xác thực</span> <span class="badge badge-danger" v-if="!user.active">Chứa xác thực</span></h6>
                                            </div>
                                        </div>

                                        <div class="row mt-5">
                                            <button class="btn btn-success ml-5 px-2 py-2" data-toggle="modal" data-target="#profileModal">Thay đổi thông tin</button>
                                        </div>

                                        <!-- Button trigger modal -->
                                    
                                    
                                    <!-- Modal -->
                                    <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="profileModal" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Thay đổi thông tin</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            </div>
                                            <div class="modal-body">
                                           
                                                <div class="form-group">
                                                    <label for="exampleInputName1">Email</label>
                                                    <input type="text" class="form-control"  placeholder="Email"
                                                        >
                                                </div>

                                                <div class="form-group">
                                                    <label for="exampleInputName1">Số điện thoại</label>
                                                    <input type="text" class="form-control"  placeholder="Số điện thoại"
                                                        >
                                                </div>
                                                <div class="form-group">
                                                    <label for="exampleInputName1">Họ và tên</label>
                                                    <input type="text" class="form-control"  placeholder="Họ và tên"
                                                        >
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                                            <button type="button" class="btn btn-primary">Lưu</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                    </div><!-- .End .tab-pane -->
                                </div>
                            </div><!-- End .col-lg-9 -->
                        </div><!-- End .row -->
                    </div><!-- End .container -->
                </div><!-- End .dashboard -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <footer class="footer">
            <div class="footer-middle">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-6 col-lg-3">
                            <div class="widget widget-about">
                                <img src="/site/assets/images/logo.png" class="footer-logo" alt="Footer Logo" width="105"
                                    height="25">
                                <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate
                                    magna eros eu erat. </p>

                                <div class="social-icons">
                                    <a href="#" class="social-icon" target="_blank" title="Facebook"><i
                                            class="icon-facebook-f"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Twitter"><i
                                            class="icon-twitter"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Instagram"><i
                                            class="icon-instagram"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Youtube"><i
                                            class="icon-youtube"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Pinterest"><i
                                            class="icon-pinterest"></i></a>
                                </div><!-- End .soial-icons -->
                            </div><!-- End .widget about-widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="about.html">About Molla</a></li>
                                    <li><a href="#">How to shop on Molla</a></li>
                                    <li><a href="#">FAQ</a></li>
                                    <li><a href="contact.html">Contact us</a></li>
                                    <li><a href="login.html">Log in</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="#">Payment Methods</a></li>
                                    <li><a href="#">Money-back guarantee!</a></li>
                                    <li><a href="#">Returns</a></li>
                                    <li><a href="#">Shipping</a></li>
                                    <li><a href="#">Terms and conditions</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="#">Sign In</a></li>
                                    <li><a href="cart.html">View Cart</a></li>
                                    <li><a href="#">My Wishlist</a></li>
                                    <li><a href="#">Track My Order</a></li>
                                    <li><a href="#">Help</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .footer-middle -->

            <div class="footer-bottom">
                <div class="container">
                    <p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p>
                    <!-- End .footer-copyright -->
                    <figure class="footer-payments">
                        <img src="/site/assets/images/payments.png" alt="Payment methods" width="272" height="20">
                    </figure><!-- End .footer-payments -->
                </div><!-- End .container -->
            </div><!-- End .footer-bottom -->
        </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-close"></i></span>

            <form action="#" method="get" class="mobile-search">
                <label for="mobile-search" class="sr-only">Search</label>
                <input type="search" class="form-control" name="mobile-search" id="mobile-search"
                    placeholder="Search in..." required>
                <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
            </form>

            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active">
                        <a href="index.html">Home</a>

                        <ul>
                            <li><a href="index-1.html">01 - furniture store</a></li>
                            <li><a href="index-2.html">02 - furniture store</a></li>
                            <li><a href="index-3.html">03 - electronic store</a></li>
                            <li><a href="index-4.html">04 - electronic store</a></li>
                            <li><a href="index-5.html">05 - fashion store</a></li>
                            <li><a href="index-6.html">06 - fashion store</a></li>
                            <li><a href="index-7.html">07 - fashion store</a></li>
                            <li><a href="index-8.html">08 - fashion store</a></li>
                            <li><a href="index-9.html">09 - fashion store</a></li>
                            <li><a href="index-10.html">10 - shoes store</a></li>
                            <li><a href="index-11.html">11 - furniture simple store</a></li>
                            <li><a href="index-12.html">12 - fashion simple store</a></li>
                            <li><a href="index-13.html">13 - market</a></li>
                            <li><a href="index-14.html">14 - market fullwidth</a></li>
                            <li><a href="index-15.html">15 - lookbook 1</a></li>
                            <li><a href="index-16.html">16 - lookbook 2</a></li>
                            <li><a href="index-17.html">17 - fashion store</a></li>
                            <li><a href="index-18.html">18 - fashion store (with sidebar)</a></li>
                            <li><a href="index-19.html">19 - games store</a></li>
                            <li><a href="index-20.html">20 - book store</a></li>
                            <li><a href="index-21.html">21 - sport store</a></li>
                            <li><a href="index-22.html">22 - tools store</a></li>
                            <li><a href="index-23.html">23 - fashion left navigation store</a></li>
                            <li><a href="index-24.html">24 - extreme sport store</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="category.html">Shop</a>
                        <ul>
                            <li><a href="category-list.html">Shop List</a></li>
                            <li><a href="category-2cols.html">Shop Grid 2 Columns</a></li>
                            <li><a href="category.html">Shop Grid 3 Columns</a></li>
                            <li><a href="category-4cols.html">Shop Grid 4 Columns</a></li>
                            <li><a href="category-boxed.html"><span>Shop Boxed No Sidebar<span
                                            class="tip tip-hot">Hot</span></span></a></li>
                            <li><a href="category-fullwidth.html">Shop Fullwidth No Sidebar</a></li>
                            <li><a href="product-category-boxed.html">Product Category Boxed</a></li>
                            <li><a href="product-category-fullwidth.html"><span>Product Category Fullwidth<span
                                            class="tip tip-new">New</span></span></a></li>
                            <li><a href="cart.html">Cart</a></li>
                            <li><a href="checkout.html">Checkout</a></li>
                            <li><a href="wishlist.html">Wishlist</a></li>
                            <li><a href="#">Lookbook</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="product.html" class="sf-with-ul">Product</a>
                        <ul>
                            <li><a href="product.html">Default</a></li>
                            <li><a href="product-centered.html">Centered</a></li>
                            <li><a href="product-extended.html"><span>Extended Info<span
                                            class="tip tip-new">New</span></span></a></li>
                            <li><a href="product-gallery.html">Gallery</a></li>
                            <li><a href="product-sticky.html">Sticky Info</a></li>
                            <li><a href="product-sidebar.html">Boxed With Sidebar</a></li>
                            <li><a href="product-fullwidth.html">Full Width</a></li>
                            <li><a href="product-masonry.html">Masonry Sticky Info</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Pages</a>
                        <ul>
                            <li>
                                <a href="about.html">About</a>

                                <ul>
                                    <li><a href="about.html">About 01</a></li>
                                    <li><a href="about-2.html">About 02</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="contact.html">Contact</a>

                                <ul>
                                    <li><a href="contact.html">Contact 01</a></li>
                                    <li><a href="contact-2.html">Contact 02</a></li>
                                </ul>
                            </li>
                            <li><a href="login.html">Login</a></li>
                            <li><a href="faq.html">FAQs</a></li>
                            <li><a href="404.html">Error 404</a></li>
                            <li><a href="coming-soon.html">Coming Soon</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="blog.html">Blog</a>

                        <ul>
                            <li><a href="blog.html">Classic</a></li>
                            <li><a href="blog-listing.html">Listing</a></li>
                            <li>
                                <a href="#">Grid</a>
                                <ul>
                                    <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                    <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                    <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                    <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Masonry</a>
                                <ul>
                                    <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                    <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                    <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                    <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Mask</a>
                                <ul>
                                    <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                    <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Single Post</a>
                                <ul>
                                    <li><a href="single.html">Default with sidebar</a></li>
                                    <li><a href="single-fullwidth.html">Fullwidth no sidebar</a></li>
                                    <li><a href="single-fullwidth-sidebar.html">Fullwidth with sidebar</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="elements-list.html">Elements</a>
                        <ul>
                            <li><a href="elements-products.html">Products</a></li>
                            <li><a href="elements-typography.html">Typography</a></li>
                            <li><a href="elements-titles.html">Titles</a></li>
                            <li><a href="elements-banners.html">Banners</a></li>
                            <li><a href="elements-product-category.html">Product Category</a></li>
                            <li><a href="elements-video-banners.html">Video Banners</a></li>
                            <li><a href="elements-buttons.html">Buttons</a></li>
                            <li><a href="elements-accordions.html">Accordions</a></li>
                            <li><a href="elements-tabs.html">Tabs</a></li>
                            <li><a href="elements-testimonials.html">Testimonials</a></li>
                            <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                            <li><a href="elements-portfolio.html">Portfolio</a></li>
                            <li><a href="elements-cta.html">Call to Action</a></li>
                            <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
                        </ul>
                    </li>
                </ul>
            </nav><!-- End .mobile-nav -->

            <div class="social-icons">
                <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
            </div><!-- End .social-icons -->
        </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->

    <!-- Sign in / Register Modal -->

    <script>


        var app = new Vue({
            el: '#myapp',
            data: {
                list: [],
                listAddress: [],
                address: {},
                user:{},
                currentPage: 1,
                pageSize: 1,
                status: 0,
                totalPages: 5,
                listStatus: [
                    { id: 0, name: 'Tất cả' },
                    { id: 1, name: 'Chờ xác nhận' },
                    { id: 2, name: 'Đang giao' },
                    { id: 3, name: 'Đã giao' },
                    { id: 4, name: 'Đã hủy' }
                ],
                addressData: []

                // keyword: ''
            },
            filters: {
                customCurrency: function (input, symbol) {
                    if (!input) return '';

                    var sign = (symbol !== undefined) ? symbol : 'đ';

                    input = input.toFixed(0).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g, "$1,");

                    return input + ' ' + sign;
                }
            },
            methods: {

                getStatusClass(status) {
                    if (status === 'PENDING') {
                        return 'badge badge-primary text-white';
                    } else if (status === 'CANELED') {
                        return 'badge badge-danger';
                    } else if (status === 'DELIVERED') {
                        return 'badge badge-success';
                    } else {
                        return 'badge badge-warning text-white'
                    }
                },


                getStatusNameText(status) {
                    if (status === 'PENDING') {
                        return 'Chờ xác nhận';
                    } else if (status === 'CANELED') {
                        return 'Đã hủy';
                    } else if (status === 'DELIVERED') {
                        return 'Đã giao';
                    } else {
                        return 'Đang giao hàng'
                    }
                },

                goToPage(pageNumber) {
                    // Cập nhật biến currentPage
                    this.currentPage = pageNumber;
                    var self = this;


                    axios.get("/order/getAllByUser?page=" + self.currentPage + "&size=" + self.pageSize + "&status=" + self.status)
                        .then(function (response) {
                            self.list = response.data.content;
                            self.totalPages = response.data.totalPages;

                            var params = new URLSearchParams(window.location.search);
                            params.set('page', self.currentPage);
                            params.set('size', self.pageSize);
                            params.set('status', self.status)
                            window.history.pushState({}, '', '?' + params.toString());
                        })
                        .catch(function (error) {
                            console.log(error)
                        })
                },

                setSize: function (size) {
                    // Cập nhật biến currentPage
                    this.pageSize = size;

                    this.goToPage(1)

                },

                next() {

                    if (this.currentPage < this.totalPages) {
                        this.currentPage++
                    }

                    this.goToPage(this.currentPage)
                },
                prev() {

                    if (this.currentPage > 1) {
                        this.currentPage--
                    }

                    this.goToPage(this.currentPage)
                },

                getPaginationArray: function () {
                    let startPage = Math.max(1, this.currentPage - 2);
                    let endPage = Math.min(startPage + 4, this.totalPages);

                    let arr = [];
                    for (let i = startPage; i <= endPage; i++) {
                        arr.push(i);
                    }
                    return arr;
                },
                getListAddress() {
                    var self = this
                    axios.get('/address/getAddressByUser')
                        .then(res => {
                            self.listAddress = res.data
                        }).catch(err => {

                        })
                },
                editAddress(id) {
                    var self = this
                    // self.address = {};
                    axios.get('/address/edit/' + id)
                        .then(res => {
                            self.address = res.data;

                       
                            self.fillAddress(self.address.provice,self.address.district);
                             
                               
                             

                           $("#addressModal").modal()
                        })
                        .catch(err => {
                            console.log(err);
                        })
                },
                getCurrentUser(){
                    var self = this

                    axios.get('/profile/getCurrentUser')
                    .then(response =>{
                        self.user = response.data
                    }).catch(err => {});
                },
                cancelOrder(id){
                    var self = this
                    axios.put('/order/cancelOrder/'+id)
                    .then(response =>{
                        self.goToPage(1)
                        $.toast({
                                heading: 'Thành công',
                                text: 'Hủy đơn hàng thành công!',
                                showHideTransition: 'slide',
                                position: 'top-right',
                                icon: 'success'
                            })
                    }).catch(err => {
                        $.toast({
                                heading: 'Thông báo',
                                text: 'Hủy đơn hàng thất bại!',
                                showHideTransition: 'slide',
                                position: 'top-right',
                                icon: 'error'
                            })
                    });
                },

                getAddressData(){
                    var self = this

                    axios.get('/site/js/data.json')
                    .then(res => {
                     self.addressData = res.data

                   });
                },

                fillAddress(provinceName,districtsName){
                    console.log(name)

                    const selectedProvince = this.addressData.find(item => item.name.trim() == provinceName.trim());
                    
                    let districts;
                    $('#district').empty()
                    if (selectedProvince) {      
                        selectedProvince.districts.forEach(element => {
                           
                            $('#district').append(`<option value="${element.name}" >${element.name}</option>`)
                        });
                    }

                  
                    const selectedDistricts = selectedProvince.districts.find(item => item.name.trim() == districtsName.trim());

                    if (selectedDistricts) {
                        selectedDistricts.wards.forEach(element => {
                        $('#town').append(`<option value="${element.name}">${element.name}</option>`)
                    });
                }

                  
                },

                updateAddress(){
                    var self = this;
                    axios.put('/address/update',self.address)
                    .then(res=>{


                        self.getListAddress()
                        $.toast({
                                heading: 'Thành công',
                                text: 'Cập nhật địa chỉ thành công!',
                                showHideTransition: 'slide',
                                position: 'top-right',
                                icon: 'success'
                            })
                    })
                    .catch(err=>{
                        $.toast({
                                heading: 'Thông báo',
                                text: 'Cập nhật địa chỉ thất bại!',
                                showHideTransition: 'slide',
                                position: 'top-right',
                                icon: 'error'
                            })
                    })
                }

                // districtChange()
               
                

            },
            created() {

                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                this.currentPage = parseInt(urlParams.get('page')) || 1;
                this.pageSize = parseInt(urlParams.get('size')) || 3;
                this.status = parseInt(urlParams.get('status')) || 0;

                this.goToPage(this.currentPage)
                this.getListAddress()
                this.getCurrentUser()


                this.sizes = [1, 3, 6, 9, 12, 15];

                this.selectedSize = parseInt(this.pageSize)
             
                this.getAddressData()

            }
        });



    </script>
    <!-- Plugins JS File -->
    <script src="/site/assets/js/jquery.min.js"></script>
    <script src="/site/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/site/assets/js/jquery.hoverIntent.min.js"></script>
    <script src="/site/assets/js/jquery.waypoints.min.js"></script>
    <script src="/site/assets/js/superfish.min.js"></script>
    <script src="/site/assets/js/owl.carousel.min.js"></script>
    <!-- Main JS File -->
    <script src="/site/assets/js/main.js"></script>
    <script src="/site/js/api.js"></script>
</body>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.1/jquery.toast.min.js"
integrity="sha512-zv5L1hY+PMayrX2l0ojsUqem6AHpdSIVyDJBlDQH/fMLpH1JgaxPTjpum1b1AlLHdARVonrpomps+GgR0oN3MA=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.1/jquery.toast.js"
integrity="sha512-CwEY0URPo9ZtMMCpiW/mUx4iW2AseRWTbCEJZNoVr18gbFVIGmwztqu50C0LWwUYpA7PRgBXWard2HO4uwZDfA=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- molla/dashboard.html  22 Nov 2019 10:03:13 GMT -->

</html>